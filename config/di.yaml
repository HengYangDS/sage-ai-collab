# SAGE Dependency Injection Container Configuration
#
# Configuration for DI container service registration.
# This file is part of the modular configuration system.
#
# Lifetime options:
#   - singleton: Single instance for entire application.
#   - transient: New instance on each resolve.
#   - scoped: Single instance within a scope.

# =============================================================================
# DI Container Configuration
# =============================================================================
di:
  auto_wire: true

  services:
    # =========================================================================
    # Core Services (Implemented)
    # =========================================================================

    # Event Bus - Async pub/sub message broker
    EventBus:
      lifetime: singleton
      implementation: AsyncEventBus

    # Source Protocol - Knowledge loading (LoaderProtocol in design doc)
    SourceProtocol:
      lifetime: singleton
      implementation: TimeoutLoader
      config_key: plugins.loader

    # Memory Store - Session persistence
    MemoryStore:
      lifetime: singleton
      implementation: MemoryStore

    # Token Budget - Token management
    TokenBudget:
      lifetime: singleton
      implementation: TokenBudget

    # =========================================================================
    # v1.1 Placeholder Services (Not Yet Implemented)
    # =========================================================================
    # Uncomment when implementations are available

    # Knowledge Protocol - Knowledge search and retrieval
    # KnowledgeProtocol:
    #   lifetime: transient
    #   implementation: KnowledgeService

    # Output Protocol - Multi-channel output formatting
    # OutputProtocol:
    #   lifetime: scoped
    #   implementation: MultiChannelOutput

    # Refine Protocol - Metrics collection and refinement
    # RefineProtocol:
    #   lifetime: singleton
    #   implementation: MetricsCollector
